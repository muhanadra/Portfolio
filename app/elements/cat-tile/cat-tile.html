<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<dom-module id="cat-tile">

  <!-- <link rel="import" type="css" href="../shared.css"> -->

  <style>

    :host {
      display: block;
      color: white;
      height: 100%;
    }
    paper-material {
      -webkit-transition-duration: 400ms;
      -moz-transition-duration: 400ms;
      -o-transition-duration: 400ms;
      transition-duration: 400ms;
      transform-origin: top;
      -webkit-transition-property: all;
      -moz-transition-property: all;
      -o-transition-property: all;
      transition-property: all;
      will-change: transform;
    }
    paper-material:hover {
      @apply(--shadow-elevation-16dp);
      background-color: var(--light-primary-color);
    }
    .custom-link {
      text-decoration: none;
      color: white;
    }
    .custom-link:hover {
      color: white;
    }

    .tile-info {
      position: absolute;
      bottom: 0;
      background-color: rgba(100,100,100,0.5);
      width: 100%;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
    }

    h2 {
      font-size: 20px;
      margin: auto 0 auto 0;
      -webkit-flex-grow: 1;
          -ms-flex-positive: 1;
              flex-grow: 1;
      padding-left: 10px;
    }

    .icon-larger {
      width: 70%;
      height: 70%;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      margin: 0 auto;
    }

    .full {
      min-height: 110px;
      width: 100%;
      height: 100%;
      width: calc(100% - 8x);
      height: calc(100% - 8x);
      background-color: var(--default-primary-color);
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      -webkit-flex-direction: column;
          -ms-flex-direction: column;
              flex-direction: column;
    }
    /* Colors */

    .tile:nth-child(1) paper-material .tile-info {
      background-color: #009688;
      color: #fff;
    }

    .tile:nth-child(1) paper-material {
      color: #009688;
      transform-origin: top left;
    }

    .tile:nth-child(2) paper-material .tile-info {
      background-color: #00BCD4;
      color: #fff;
    }

    .tile:nth-child(2) {
      color: #00BCD4;
    }

    .tile:nth-child(3) paper-material .tile-info {
      background-color: #03A9F4;
      color: #fff;
    }

    .tile:nth-child(3) {
      color: #03A9F4;
    }
    .tile:nth-child(4) paper-material .tile-info {
      background-color: #2196F3;
      color: #fff;
    }
    .tile:nth-child(4) paper-material {
      color: #2196F3;
      transform-origin: top right;
    }
    .tile:nth-child(5) paper-material .tile-info {
      background-color: #536DFE;
      color: #fff;
    }
    .tile:nth-child(5) paper-material {
      color: #536DFE;
      transform-origin: bottom left;
    }
    .tile:nth-child(6) paper-material .tile-info {
      background-color: #F44336;
      color: #fff;
    }
    .tile:nth-child(6) paper-material {
      color: #F44336;
      transform-origin: bottom;
    }
    .tile:nth-child(7) paper-material .tile-info {
      background-color: #D32F2F;
      color: #fff;
    }
    .tile:nth-child(7) paper-material {
      color: #D32F2F;
      transform-origin: bottom;
    }
    .tile:nth-child(8) paper-material .tile-info {
      background-color: #FF9800;
      color: #fff;
    }
    .tile:nth-child(8) paper-material {
      color: #FF9800;
      transform-origin: bottom right;
    }
    @media all and (max-width: 481px) {
      .tile {
        display: inline-block;
        float: left;
        vertical-align: top;
        min-height: 110px;
        width: 100%;
        margin: 4px;
      }

      .tile-info {
        position: relative;
      }

      .icon-larger {
        width: 140px;
        height: 140px;
      }
    }
    /* Medium View*/
    @media all and (min-width: 481px) and (max-width: 840px) {
      .tile {
        display: inline-block;
        float: left;
        vertical-align: top;
        width: 50%;
        height: 50%;
        width: calc(50%);
        height: calc(50%);
      }
    }
    @media all and (min-width: 841px) {
      .tile {
        position: relative;
        display: inline-block;
        float: left;
        vertical-align: top;
        width: 16.66666666666667%;
        height: 33.333333333333334%;
        width: calc(100% / 6);
        height: calc(100% / 3);
        flex:1;

        @apply(--paper-font-title);
        @apply(--layout-vertical);
        @apply(--layout-center-center);
      }

      .tile:nth-of-type(1) {
        width: 33.333333333333334%;
        height: 66.66666666666667%;
        width: calc(100% / 3);
        height: calc(100% / 3 * 2);
      }

      .tile:nth-of-type(4) {
        width: 33.333333333333334%;
        height: 66.66666666666667%;
        width: calc(100% / 3);
        height: calc(100% / 3 * 2);
      }

      .tile:nth-of-type(7) {
        width: 33.333333333333334%;
        height: 66.66666666666667%;
        width: calc(100% / 3);
        height: calc(100% / 3 * 2);
        position: absolute;
        top: 33.333333333333334%;
        top: calc(100% / 3 );
        top: -webkit-calc(100% / 3 );
        left: 33.333333333333334%;
        left: calc(100% / 3);
        left: -webkit-calc(100% / 3);
      }

      .tile:nth-of-type(8) {
        width: 33.333333333333334%;
        height: 33.333333333333334%;
        width: calc(100% / 3);
        height: calc(100% / 3);
        position: absolute;
        left: 66.66666666666667%;
        left: calc(100% / 3 * 2);
        bottom: 0;
      }
    }


  </style>

  <template>

    <template is="dom-repeat" items="[[config]]">
      <div  class$="[[_computeTileClass(item.color)]]">
        <paper-material class="full">
          <iron-icon icon$="[[item.icon]]" class="icon-larger"></iron-icon>
          <a href$="[[item.value]]" class="custom-link ">
          <div class="tile-info">
            <h2>[[item.value]]</h2>
            <paper-icon-button icon="arrow-forward" class="action-button"></paper-icon-button>
          </div>
          </a>
        </paper-material>
      </div>
    </template>

  </template>

</dom-module>

<script>

  Polymer({

    is: 'cat-tile',

    behaviors: [
      Polymer.NeonSharedElementAnimatableBehavior
    ],

    properties: {

      config: {
        type: Array,
        value: function() {
          return [
            {value: 'Skills', color: 'blue', icon: 'code'},
            {value: 'Contact', color: 'red', icon: 'mail'},
            {value: 'About', color: 'green', icon: 'account-circle'},
            {value: 'Projects', color: 'blue', icon: 'work'},
            {value: 'Games', color: 'green', icon: 'hardware:gamepad'},
            {value: 'Frogger', color: 'yellow', icon: 'bug-report'},
            {value: 'Services', color: 'blue', icon: 'gesture'},
            {value: 'Blog', color: 'red', icon: 'create'}
          ]
        }
      },

      animationConfig: {
        type: Object,
        value: function() {
          return {
            'exit': [{
              name: 'ripple-animation',
              id: 'ripple',
              fromPage: this
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this
            }]
          }
        }
      }

    },

    listeners: {
      click: '_onClick'
    },

    _computeTileClass: function(color) {
      return 'tile ' + color + '-300';
    },

    _onClick: function(event) {
      var target = event.target;
      while (target !== this && !target._templateInstance) {
        target = target.parentNode;
      }

      // configure the page animation
      this.sharedElements = {
        'hero': target,
        'ripple': target
      };
      this.animationConfig['exit'][0].gesture = {
        x: event.x || event.pageX,
        y: event.y || event.pageY
      };

      this.fire('tile-click', {
        tile: target,
        data: target._templateInstance.item
      });
    }

  });

</script>
